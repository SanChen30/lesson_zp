# 闭包的应用场景


## 性能优化

- 防抖（debounce）

    - 执行太密集
    - 任务比较复杂
  
  - 场景
    - baidu ajax suggest 搜索建议
    - code suggest 代码提示
  
  - 太快了，请求开销大
  - 太慢了，用户体验差

## 防抖（debounce）

在事件被频繁触发时，只在最后一次触发后等待指定时间再执行函数。如果在这段时间内再次被触发，则重新计时。

- keyup 事件太频繁，没必要执行那么多次
- 不管 keyup 事件触发多少次，我只执行最后一次

借助定时器和闭包

- 推迟执行 timeout
- 定时器ID 放到闭包中，方便清除
- 每次触发都清除之前的定时器，重新开始倒计时
- 执行最后一次


## 节流（throttle）

在事件被频繁触发时，保证函数在指定时间间隔内最多只执行一次。

- 每隔一定时间执行一次

函数节流就像是fps游戏的射速，就算一直按着鼠标射击，也只会在规定射速内射出子弹。

## 总结

函数的防抖和节流都是防止某一时间频繁触发，但是它们的原理不一样

防抖是某段时间内只执行一次，而函数节流是间隔时间执行

- debounce 
  - 搜索，用户不断输入值时，用防抖来节约请求资源
- throttle
  - 滚动加载，用户不断滚动页面时，用节流来节约请求资源

特性,                   防抖 (Debounce),                    节流 (Throttle)
执行时机,                动作停止后执行一次,                 动作持续期间，按固定频率执行
关注点,                 关注结果（你输完了吗？）,             关注过程（别太快，慢慢来）
典型场景,                输入框搜索、表单验证,               页面滚动、拖拽元素、点击按钮
关键逻辑,清             除旧定时器，开启新定时器,             检查距离上次执行是否已过指定间隔

setTimeout 是 “延时器”：等一会，只做一次。

setInterval 是 “定时器”：每隔一会，一直做。