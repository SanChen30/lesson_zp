<!DOCTYPE html>  <!-- HTML5 文档类型声明 -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML5 Buffer</title>
</head>
<body>
    <h1>Buffer</h1>
    <div id="output"></div>
    <script>
        // JS 二进制操作，缓冲层，数组缓存
        // HTML5 编码对象 TextEncoder
        const encoder = new TextEncoder();
        console.log(encoder);
        const myBuffer = encoder.encode("你好 HTML5");
        console.log(myBuffer);

        // 数组缓存 12 个字节
        // 创建一个缓冲区
        const buffer = new ArrayBuffer(12);
        // 创建一个视图（view）来操作这个缓冲区
        const view = new Uint8Array(buffer);
        for(let i = 0; i < myBuffer.length; i++){
            // console.log(myBuffer[i]);
            view[i] = myBuffer[i];
        }
        // 解码对象 TextDecoder
        const decoder = new TextDecoder();
        const originalText = decoder.decode(buffer);
        console.log(originalText);

        const outputDiv = document.getElementById('output');
        outputDiv.innerHTML = `
        完整数据: [${view}] <br>
        第一个字节: ${view[0]} <br>
        缓冲区的字节长度: ${buffer.byteLength} <br>
        原来的文本: ${originalText}
        `
    </script>
</body>
</html>